INFO:werkzeug:192.168.1.5 - - [24/Aug/2025 23:06:02] "GET /api/get-item-name?item_code=RedmiNote4 HTTP/1.1" 200 -
ERROR:root:❌ ENTERPRISE ERROR in batch 1: (pymysql.err.IntegrityError) (1062, "Duplicate entry '140-RDM300' for key 'serial_number_transfer_serials.unique_serial_per_item'")
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 140, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 24, 706925)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
WARNING:root:⚠️ Individual item error for RDM300: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`wms_test`.`serial_number_transfer_serials`, CONSTRAINT `serial_number_transfer_serials_ibfk_1` FOREIGN KEY (`transfer_item_id`) REFERENCES `serial_number_transfer_items` (`id`) ON DELETE CASC)')
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 140, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 26, 446683)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR:root:❌ Sub-batch error: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`wms_test`.`serial_number_transfer_serials`, CONSTRAINT `serial_number_transfer_serials_ibfk_1` FOREIGN KEY (`transfer_item_id`) REFERENCES `serial_number_transfer_items` (`id`) ON DELETE CASC)')
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 140, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 26, 446683)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR:root:❌ Final commit failed: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`wms_test`.`serial_number_transfer_serials`, CONSTRAINT `serial_number_transfer_serials_ibfk_1` FOREIGN KEY (`transfer_item_id`) REFERENCES `serial_number_transfer_items` (`id`) ON DELETE CASC)')
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 140, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 26, 446683)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR:root:Error adding item to serial transfer: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`wms_test`.`serial_number_transfer_serials`, CONSTRAINT `serial_number_transfer_serials_ibfk_1` FOREIGN KEY (`transfer_item_id`) REFERENCES `serial_number_transfer_items` (`id`) ON DELETE CASC)')
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 140, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 26, 446683)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:192.168.1.5 - - [24/Aug/2025 23:06:26] "POST /inventory_transfer/serial/38/add_item HTTP/1.1" 500 -
ERROR:root:❌ ENTERPRISE ERROR in batch 1: (pymysql.err.IntegrityError) (1062, "Duplicate entry '141-RDM300' for key 'serial_number_transfer_serials.unique_serial_per_item'")
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 141, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 54, 97901)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
WARNING:root:⚠️ Individual item error for RDM300: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`wms_test`.`serial_number_transfer_serials`, CONSTRAINT `serial_number_transfer_serials_ibfk_1` FOREIGN KEY (`transfer_item_id`) REFERENCES `serial_number_transfer_items` (`id`) ON DELETE CASC)')
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 141, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 55, 914597)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
ERROR:root:❌ Sub-batch error: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`wms_test`.`serial_number_transfer_serials`, CONSTRAINT `serial_number_transfer_serials_ibfk_1` FOREIGN KEY (`transfer_item_id`) REFERENCES `serial_number_transfer_items` (`id`) ON DELETE CASC)')
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 141, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 55, 914597)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR:root:❌ Final commit failed: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`wms_test`.`serial_number_transfer_serials`, CONSTRAINT `serial_number_transfer_serials_ibfk_1` FOREIGN KEY (`transfer_item_id`) REFERENCES `serial_number_transfer_items` (`id`) ON DELETE CASC)')
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 141, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 55, 914597)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
ERROR:root:Error adding item to serial transfer: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely)
(pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`wms_test`.`serial_number_transfer_serials`, CONSTRAINT `serial_number_transfer_serials_ibfk_1` FOREIGN KEY (`transfer_item_id`) REFERENCES `serial_number_transfer_items` (`id`) ON DELETE CASC)')
[SQL: INSERT INTO serial_number_transfer_serials (transfer_item_id, serial_number, internal_serial_number, system_serial_number, is_validated, validation_error, manufacturing_date, expiry_date, admission_date, created_at) VALUES (%(transfer_item_id)s, %(serial_number)s, %(internal_serial_number)s, %(system_serial_number)s, %(is_validated)s, %(validation_error)s, %(manufacturing_date)s, %(expiry_date)s, %(admission_date)s, %(created_at)s)]
[parameters: {'transfer_item_id': 141, 'serial_number': 'RDM300', 'internal_serial_number': 'RDM300', 'system_serial_number': None, 'is_validated': 0, 'validation_error': 'Series RDM300 is not available in warehouse 7000-QFG', 'manufacturing_date': None, 'expiry_date': None, 'admission_date': None, 'created_at': datetime.datetime(2025, 8, 24, 17, 36, 55, 914597)}]
(Background on this error at: https://sqlalche.me/e/20/gkpj) (Background on this error at: https://sqlalche.me/e/20/7s2a)
INFO:werkzeug:192.168.1.5 - - [24/Aug/2025 23:06:55] "POST /inventory_transfer/serial/38/add_item HTTP/1.1" 500 -
